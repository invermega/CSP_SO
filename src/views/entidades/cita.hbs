<div class="container-fluid px-4">
    <h1 class="mt-4 tituloverde">Gestión de citas</h1>
    <ol class="breadcrumb mb-4">
        <li class="breadcrumb-item"><a href="/">Dashboard</a></li>
        <li class="breadcrumb-item active">Citas</li>
    </ol>
    <div class="card mb-4">
        <div class="card-header" style="display: flex; justify-content: space-between; align-items: center;">
            <div class="left-content">
                <i class="fas fa-table me-1"></i>
                Consulta de citas
            </div>
            <div>
            </div>
        </div>
        <div class="card-body body1">
            <div class="row textos " id="filtros"
                style="display: ; border: 2px solid #D8D8D8; vertical-align: center; padding: 5px; border-radius: 7px;">
                <div class="row textos mt-2">
                    <div class="form-inline form-group col-sm-12">
                        <div class="col-md-3 form-inline form-group mb-1 mt-1" style="padding-left: 0px;">
                            <div class="input-group input-group-sm" style="width: 100%;">
                                <label class="input-group-text form-control-sm" for="fecini">Inicio</label>
                                <input type="date" class="form-control form-control-sm custom-date-input" id="fecini"
                                    name="fecini" step="1" required="">
                                <label class="input-group-text form-control-sm" for="fecfin">Fin</label>
                                <input type="date" class="form-control form-control-sm" id="fecfin" name="fecfin"
                                    step="1" required="">
                            </div>
                        </div>
                        <div class="col-md-3 mb-1 mt-1">
                            <div class="input-group input-group-sm mr-2">
                                <label class="input-group-text form-control-sm" for="paciente">Paciente</label>
                                <input type="text" id="paciente" class="form-control form-control-sm"
                                    placeholder="Nombre y/o DNI del paciente">
                                <button type="button" class="btn input-group-text" id="search">
                                    <i class="fa-regular fa-user"></i>
                                </button>
                            </div>
                        </div>
                        <div class="col-md-3 form-inline col-sm-12 form-group mb-1 mt-1">
                            <div class="input-group input-group-sm" style="width: 100%;">
                                <label class="control-label input-group-text" for="stacita">Estados</label>
                                <select class="form-select" name="stacita" id="stacita"
                                    aria-label="Default select example">
                                </select>
                                <label class="input-group-text form-control-sm" for="stacita">
                                    <i class="fa-solid fa-clipboard-list"></i></label>
                            </div>
                        </div>
                        <div class="col-md-3 mb-1 mt-1">
                            <div class="input-group input-group-sm mr-2">
                                <label class="input-group-text form-control-sm" for="cli_id">Cliente</label>
                                <input type="hidden" id="cli_id" value="0">
                                <input type="text" id="razsoc" class="form-control form-control-sm"
                                    placeholder="Nombre y/o RUC del cliente" disabled>
                                <button type="button" class="btn input-group-text" data-toggle="modal"
                                    data-target="#modalFormEmpresa">
                                    <i class="fa-regular fa-building"></i>
                                </button>
                            </div>
                            <!--MODAL EMPRESA-->
                            <div class="modal fade" id="modalFormEmpresa" role="dialog">
                                <div class="modal-dialog ">
                                    <div class="modal-content">
                                        <div class="modal-header"
                                            style="background-color: #0FA0A7;color: white;border-color: #0FA0A7;">
                                            <h4 class="modal-title">BUSQUEDA DE
                                                EMPRESA</h4>
                                        </div>
                                        <div class="modal-body">
                                            <div class="input-group input-group-sm" style="width: 100%;">
                                                <label class="control-label input-group-text"
                                                    for="empresamodal">EMPRESA</label>
                                                <input class="form-control form-control-sm " id="empresamodal"
                                                    placeholder="Ingrese el nombre de la empresa" required></input>
                                                <label class="input-group-text form-control-sm"><i
                                                        class="fa-solid fa-magnifying-glass"></i></label>
                                            </div>
                                            <div class="row mb-2 mt-2">
                                                <div class="table-responsive">
                                                    <table
                                                        class="records_list table table-sm table-hover letra animate__animated animate__fadeInDown"
                                                        id="tableEmpresamodal" style="display: none;">
                                                        <thead class="thead">
                                                            <tr>
                                                                <th scope="col">RAZON SOCIAL</th>
                                                                <th scope="col">RUC</th>
                                                                <th scope="col">ACCIÓN</th>
                                                            </tr>
                                                        </thead>
                                                        <tbody id="bodyEmpresa" style="text-align: left;">
                                                        </tbody>
                                                    </table>

                                                </div>
                                                <div class="text-center" id="cargaEmpresa" style="display: none;">
                                                    <div class="d-flex justify-content-center align-items-center"
                                                        style="min-height: 5vh;">
                                                        <lottie-player src="/img/jsonimg/Cargahealth.json"
                                                            background="transparent" speed="1"
                                                            style="width: 200px; height: 200px;" loop
                                                            autoplay></lottie-player>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="modal-footer">
                                                <button type="button" class="btn"
                                                    style="background-color: #793B8E;color: white;border-color: #793B8E;"
                                                    id="cerrardistrito" data-dismiss="modal"> <i
                                                        class="fa-solid fa-circle-xmark"></i>
                                                    Cerrar</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row textos mt-1">
                    <div class="form-inline form-group col-sm-12">
                        <div class="col-md-3 mb-1 mt-1" style="padding-left: 0px;">
                            <div class="input-group input-group-sm" style="width: 100%;">
                                <label class="control-label input-group-text" for="codpro_id">Protocolo</label>
                                <select class="form-select" name="codpro_id" id="codpro_id"
                                    aria-label="Default select example">
                                </select>
                                <label class="input-group-text form-control-sm" for=""><i
                                        class="fa-regular fa-file-lines"></i></label>
                            </div>
                        </div>
                        <div class="col-md-3 form-inline col-sm-12 form-group mb-1 mt-1" >
                            <label class="control-label input-group-text" for="parametro4" style="height: 30px;border-top-right-radius: 0px;border-bottom-right-radius: 0px;">Solo
                                auditado</label>
                            <div class="input-group-text" style="border-bottom-left-radius: 0px;border-top-left-radius: 0px;background-color: white ;">
                                <input class="form-check-input mt-0" type="checkbox" value="" id="parametro4"
                                    name="parametro4" aria-label="Checkbox for following text input" style="border-radius: 0px;">
                            </div>
                        </div>
                        <div class="col-md-6" >
                            <div class="form-inline col-sm-12 form-group mb-1 mt-1" style="padding-left: 0px;">
                                <div class="input-group input-group mr-4" >
                                    <button type="button" class="btn input-group-text" id="refresh" data-toggle="tooltip" data-placement="top" title="Actualizar">
                                        <i class="fa-solid fa-retweet"></i>
                                    </button>
                                    <a class="opcionform btn input-group-text" href="/citacreate" data-toggle="tooltip" data-placement="top" title="Añadir"><i
                                            class="fa-solid fa-plus"></i>
                                    </a>
                                    <button type="button" class="btn input-group-text" id="edit"
                                        onclick="navegaredit('mydatatable','citaedit')" data-toggle="tooltip" data-placement="top" title="Editar">
                                        <i class="fa-solid fa-pen"></i>
                                    </button>
                                    <button type="button" class="btn input-group-text" id="delete" onclick="eliminar()" data-toggle="tooltip" data-placement="top" title="Eliminar">
                                        <i class="fa-solid fa-trash"></i>
                                    </button>
                                </div>
                                <div class="input-group input-group mr-2" >                                    
                                    <button type="button" class="btn input-group-text" id="hruta"
                                        onclick="navegargetidhr('mydatatable')" data-toggle="tooltip" data-placement="top" title="Descargar hoja de ruta">
                                        <i class="fa-solid fa-file"></i>
                                    </button>
                                    <button type="button" class="btn input-group-text" id="cinf"
                                        onclick="navegargetidci('mydatatable')" data-toggle="tooltip" data-placement="top" title="Descargar consentimiento informado">
                                        <i class="fa-solid fa-book"></i>
                                    </button>
                                    <!--<button type="button" class="btn input-group-text" id="edit"
                                        onclick="navegargetid('mydatatable')" data-toggle="tooltip" data-placement="top" title="Exportar">
                                        <i class="bi bi-filetype-xls" style="max-height: 16px;line-height: 1;"></i>
                                    </button>-->
                                    <!--<button type="button" class="btn input-group-text" id="edit"
                                        onclick="navegargetid('mydatatable')" data-toggle="tooltip" data-placement="top" title="Este es un tooltip">
                                        <i class="fa-solid fa-pen"></i>
                                    </button>-->                                    
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
            <div class="table-responsive mt-3">
                <table
                    class="records_list table table-sm table-striped table-bordered letra animate__animated animate__fadeInDown"
                    id="mydatatable" style="display: none;">
                    <thead class="thead">
                        <tr>
                            <th scope="col">CHECK</th>
                            <th scope="col">FECHA DE CITA</th>
                            <th scope="col">HORA DE CITA</th>
                            <th scope="col">TURNO</th>
                            <th scope="col">EMPRESA</th>
                            <th scope="col">NOMBRE DEL PACIENTE</th>
                            <th scope="col">N° DOCUMENTO</th>
                            <th scope="col">PROTOCOLO</th>
                            <th scope="col">ESTADO</th>
                            <th scope="col">RESULTADO</th>
                            <th scope="col">CERT. MEDICA</th>
                            <th scope="col">INF. MÉDICA</th>
                        </tr>
                    </thead>
                    <tbody id="bodyCita">
                    </tbody>
                </table>
            </div>
            <div class="text-center" id="carga" style="display: none;">
                <div class="d-flex justify-content-center align-items-center" style="min-height: 5vh;">
                    <lottie-player src="/img/jsonimg/Cargahealth.json" background="transparent" speed="1"
                        style="width: 300px; height: 300px;" loop autoplay></lottie-player>
                </div>
            </div>
        </div>
    </div>
</div>

<script src="/js/entidades/cita.js"> </script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.17.2/xlsx.full.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">